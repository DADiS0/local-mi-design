"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["4971"],{81797:function(t,n,e){e.d(n,{$:()=>k});var r=e(67294),a=e(94184),i=e(78868),o=e(55709),u=e(41931),c=e(43825),l=e(13251),f=e(30776),s=e(20833),m=e(30130),d=e(582),p=e(66008),b=e(55412),v=e(15292),y=e(99506);function g(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function _(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e,r,a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i=[],o=!0,u=!1;try{for(a=a.call(t);!(o=(e=a.next()).done)&&(i.push(e.value),!n||i.length!==n);o=!0);}catch(t){u=!0,r=t}finally{try{o||null==a.return||a.return()}finally{if(u)throw r}}return i}}(t,n)||O(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,n){if(t){if("string"==typeof t)return g(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return g(t,n)}}function N(t){var n,e=t.skuMap,i=t.skuList,u=t.skuData,c=t.portalClassName,l=t.titleClassName,f=t.extendClassName,s=t.baseClassName,m=(0,b.m)(function(t,n){return n.pipe((0,o.U)(function(t){var n=j(t,3),e=n[0],r=n[1],a=n[2];return!!e.length&&!!r.length&&!!a.length}))},!1,[i,e,u]),d=j((0,r.useState)([{list:[,,,].fill(1)},{list:[,,].fill(1)}]),1)[0];return m?r.createElement(A,t):r.createElement("section",{className:a((_(n={},"".concat(c),!!c),_(n,"".concat(s," ").concat(s,"--loading"),!!s),_(n,"".concat(f," ").concat(f,"--loading"),!!f),n))},d.map(function(t,n){var e,i;return r.createElement(r.Fragment,{key:n},r.createElement("h3",{className:a((_(e={},"".concat(s,"__title ").concat(s,"__title--loading"),!!s),_(e,"".concat(f,"__title ").concat(f,"__title--loading"),!!f),_(e,"".concat(l," ").concat(l,"--loading"),!!l),e))},"\xa0"),r.createElement("ul",{className:a((_(i={},"".concat(s,"__list"),!!s),_(i,"".concat(f,"__list"),!!f),i))},t.list.map(function(t,n){var e,i;return r.createElement("li",{className:a((_(e={},"".concat(s,"__item"),!!s),_(e,"".concat(f,"__item"),!!f),e)),key:n},r.createElement("button",{className:a((_(i={},"".concat(s,"__button"),!!s),_(i,"".concat(f,"__button"),!!f),i))}))})))}))}function A(t){var n,e=t.skuMap,g=t.skuList,O=t.skuData,N=t.currentGoodsId,A=t.bigTapDisabledIds,k=t.setGoodsId,E=t.resetGoodsId,S=t.skuClickBury,w=t.portalClassName,D=t.titleClassName,I=t.extendClassName,x=t.baseClassName,C=t.forwardedRef,U=[x,I||""].filter(function(t){return!!t}),M=j((0,r.useState)(""),2),P=M[0],L=M[1],F=j((0,r.useState)(!1),2),R=F[0],B=F[1],G=j((0,r.useState)(Array(g.length).fill(-1)),2),K=G[0],T=G[1];function $(t,n,e){var r=Array.from(t);return r[n]=e,r}var q=(0,r.useMemo)(function(){return g.map(function(t){return t&&t.list?t.list.map(function(t){return t.name}):[]}).map(function(t){return t.map(function(t,n){return n})}).map(function(t){return t.map(function(t){return[t]})}).reduce(function(t,n){return t.reduce(function(t,e){return t.concat(n.map(function(t){return e.concat(t)}))},[])},[[]]).map(function(t){var n=e.filter(function(n){var e=j(n,2),r=e[0];return e[1],r===t.join(",")}).map(function(t){var n=j(t,2);return(n[0],n[1]).goodsId}).map(function(t){return Number(j(t,1)[0]||0)});return[t.join(","),n]})},[g,e]),H=(0,b.m)(function(t,n){return n.pipe((0,o.U)(function(t){var n=j(t,2),e=n[0],r=n[1];return e.map(function(t){var n=j(t,2);return[n[0],n[1].map(function(t){return Object.assign({},r.find(function(n){return n.itemId===t}))})]})}))},[],[q,O]),V=(0,r.useMemo)(function(){return g.map(function(t){return(null==t?void 0:t.list)||[]}).map(function(t,n){return t.map(function(t,e){return{className:U.map(function(t){return"".concat(t,"__button")}).join(" "),itemPosition:[n,e],isDisabled:!1,isVisible:!0}})})},[g]),z=(0,b.m)(function(t,n){return n.pipe((0,u.x)(function(t,n){var e=j(t,2),r=e[0],a=e[1],i=j(n,2),o=i[0],u=i[1];return r.join(",")===o.join(",")&&a===u}),(0,c.M)(t),(0,o.U)(function(t){var n=j(t,2),e=j(n[0],3),r=e[0],a=e[1],i=e[2],o=n[1];return r.map(function(t,n,e){return[[n,t],e,a,i,o[n]]})}),(0,l.b)(function(t){return i.of.apply(void 0,h(t)).pipe((0,o.U)(function(t,n){var e=j(t,5),r=j(e[0],2),a=(r[0],r[1],e[1]),i=e[2],o=e[3];return e[4].map(function(t,e){return[[n,e],a,i,o,t]})}),(0,l.b)(function(t){return i.of.apply(void 0,h(t)).pipe((0,o.U)(function(t){var n=j(t,5),e=j(n[0],2),r=e[0],a=e[1],i=n[1],o=n[2],u=n[3],c=n[4],l=U.map(function(t){return"".concat(t,"__button--active")}).join(" "),f=(U.map(function(t){return"".concat(t,"__button--hidden")}).join(" "),U.map(function(t){return"".concat(t,"__button--disabled")}).join(" ")),s=U.map(function(t){return"".concat(t,"__button--sold-out")}).join(" "),m=U.map(function(t){return"".concat(t,"__button--not-sku")}).join(" "),d=Array.from(i);d[r]=a;var p=o.filter(function(t){var n=j(t,2),e=n[0];return n[1],e===d.join(",")}).map(function(t){var n=j(t,2);return n[0],n[1]}),b=0===o.filter(function(t){var n=j(t,2),e=n[0];return n[1],e.split(",").map(function(t){return Number(t)})[r]===a}).flatMap(function(t){var n=j(t,2);return n[0],n[1]}).length,y=new Set(c.className?c.className.split(" "):[]);i[r]===a?y.add(l):y.delete(l);var g=Object.assign({},c,{className:Array.from(y).join(" ")}),_=d.slice(0,r+1);if(o.map(function(t){var n=j(t,2),e=n[0],r=n[1];return[e.split(",").map(function(t){return Number(t)}),r]}).filter(function(t){var n=j(t,2),e=n[0];return n[1],_.map(function(t,n){return e[n]===t}).every(function(t){return!0===t})}).flatMap(function(t){var n=j(t,2);return n[0],n[1]}),!p.length)return[g];if(b)return y.add(f),[g=Object.assign({},g,{className:Array.from(y).join(" "),isDisabled:!0})];y.delete(f),g=Object.assign({},g,{className:Array.from(y).join(" "),isDisabled:!1});var h=j(p,1)[0];return h.every(function(t){return!t})?(y.add(m),g=Object.assign({},g,{className:Array.from(y).join(" ")})):(y.delete(m),h.every(function(t){return u.includes(t.itemId)||(0,v.O)(t)})?y.add(s):y.delete(s),g=Object.assign({},g,{className:Array.from(y).join(" "),isDisabled:!1})),[g]}),(0,f.c)())}),(0,o.U)(function(t){return[t]}),(0,f.c)())}))},V,[K,H,A||[]]),J=j((0,y.$)(function(t,n,e){return t.pipe((0,u.x)(function(t,n){var e=j(t,2),r=(e[0],e[1]),a=j(n,2),i=(a[0],a[1]);return r.join(",")===i.join(",")}),(0,s.b)(function(t){var n=j(t,2),e=n[0];n[1],e&&(B(!0),S&&"function"==typeof S&&S(e))}),(0,o.U)(function(t){var n=j(t,2);return n[0],n[1]}),(0,m.a)(e),(0,c.M)(n),(0,s.b)(function(t){var n=j(t,2),e=j(n[0],2),r=j(e[0],4),a=r[0],i=r[1];return(r[2],r[3],e[1],j(n[1],1))[0],T(function(t){return $(t,a,i)})}),(0,o.U)(function(t){var n=j(t,2),e=j(n[0],2),r=j(e[0],4),a=r[0],i=r[1],o=r[2],u=r[3],c=j(e[1],1)[0],l=$(j(n[1],1)[0],a,i),f=c.filter(function(t){var n=j(t,2),e=n[0];return n[1],e===l.join(",")}).map(function(t){var n=j(t,2);return(n[0],j(n[1],1))[0]}).find(function(t){return!!t})||0;return f?k(f,u):o?E():L([+u,a,i,Date.now()].join(",")),[l]}))},[K],[q]),1)[0];(0,b.m)(function(t,n){return n.pipe((0,d.n)(function(t){var n=j(t,3),e=n[0];return n[1],n[2],!e.length}),(0,c.M)(t),(0,u.x)(),(0,p.h)(function(t){var n=j(t,2),e=j(n[0],3),r=(e[0],e[1],e[2]);return n[1],!r}),(0,o.U)(function(t){var n=j(t,2),e=j(n[0],3),r=e[0],a=e[1],i=(e[2],n[1]);if(a){var o=j(r.filter(function(t){var n=j(t,2),e=(n[0],j(n[1],1)[0]);return e&&e.itemId===a}),1);return j(o[0],1)[0]}var u=j(r.filter(function(t){var n=j(t,2),e=(n[0],j(n[1],1))[0];return e&&!1===(0,v.O)(e)}),1)[0],c=j(r.filter(function(t){var n=j(t,2),e=(n[0],j(n[1],1))[0];return e&&!1!==(0,v.O)(e)&&!e.isNotForSale}),1)[0],l=j(r.filter(function(t){var n=j(t,2),e=(n[0],j(n[1],1))[0];return e&&!1!==(0,v.O)(e)&&!!e.isNotForSale}),1)[0];return j(u||c||l||[i.join(",")],1)[0]}),(0,u.x)(),(0,o.U)(function(t){return t.split(",").map(function(t){return Number(t)})}),(0,s.b)(function(t){return t.map(function(t,n){return J(["",[n,t,!0,!1]])})}))},K,[H,N||0,R]),(0,r.useEffect)(function(){if(""!==P){var t,n=j(P.split(",").map(function(t){return Number(t)}),3),e=n[0],r=n[1],a=n[2],i=H.filter(function(t){var n=j(t,2);return!!(n[0],n[1]).length}).map(function(t){var n=j(t,2),e=n[0],r=n[1];return[e.split(",").map(function(t){return Number(t)}),r]}),o=i.filter(function(t){var n=j(t,2),e=n[0];return n[1],e[r]===a}).map(function(t){var n=j(t,2),e=n[0],r=n[1];return{weight:e.map(function(t,n){return+(K[n]===t)}).reduce(function(t,n){return t+n},0),goods:r}}),u=(t=Math).max.apply(t,h(o.map(function(t){return t.weight}))),c=o.filter(function(t){return t.weight===u}).flatMap(function(t){return t.goods}),l=c.find(function(t){return t&&!1===(0,v.O)(t)}),f=c.find(function(t){return t&&!1!==(0,v.O)(t)}),s=l||f,m=s&&s.itemId||0;j(i.find(function(t){var n=j(t,2),e=(n[0],j(n[1],1))[0];return e&&e.itemId===m})||[[],[]],1)[0].forEach(function(t,n){return J(["",[n,t,!0,1===e]])})}},[P]);var Q=function(t,n,e){switch(t.key){case"Enter":case" ":t.preventDefault(),J([g[n].list[e].name,[n,e,!1,!0]]);break;case"ArrowRight":t.preventDefault();var r=Array.from(document.querySelectorAll('[data-sku-group="'.concat(n,'"]'))).filter(function(t){return!t.disabled}),a=(r.findIndex(function(t){return t.getAttribute("data-sku-index")===String(e)})+1)%r.length,i=r[a];if(i){var o=Number(i.getAttribute("data-sku-index"));i.focus(),J([g[n].list[o].name,[n,o,!1,!0]])}break;case"ArrowLeft":t.preventDefault();var u=Array.from(document.querySelectorAll('[data-sku-group="'.concat(n,'"]'))).filter(function(t){return!t.disabled}),c=(u.findIndex(function(t){return t.getAttribute("data-sku-index")===String(e)})-1+u.length)%u.length,l=u[c];if(l){var f=Number(l.getAttribute("data-sku-index"));l.focus(),J([g[n].list[f].name,[n,f,!1,!0]])}}};return r.createElement("section",{tabIndex:-1,className:a((_(n={},"".concat(w),!!w),_(n,"".concat(x),!!x),_(n,"".concat(I),!!I),n)),ref:C},O.length&&g.length?g.map(function(t,n){var e,i;return r.createElement(r.Fragment,{key:t.key},r.createElement("h2",{className:a((_(e={},"".concat(x,"__title"),!!x),_(e,"".concat(I,"__title"),!!I),_(e,"".concat(D),!!D),e))},t.title),r.createElement("ul",{className:a((_(i={},"".concat(x,"__list"),!!x),_(i,"".concat(I,"__list"),!!I),i)),role:"radiogroup"},t.list.map(function(t,e){var i;return z[n][e].isVisible,r.createElement("li",{key:"".concat(n,"-").concat(e,"-").concat(t.name),className:a((_(i={},"".concat(x,"__icon-item"),!!x&&t.rgb),_(i,"".concat(x,"__item"),!!x&&!t.rgb),_(i,"".concat(I,"__icon-item"),!!I&&t.rgb),_(i,"".concat(I,"__item"),!!I&&!t.rgb),i))},r.createElement("button",{disabled:z[n][e].isDisabled,className:z[n][e].className,onClick:function(){return J([t.name,[n,e,!1,!0]])},onKeyDown:function(t){return Q(t,n,e)},"aria-label":t.name,role:"radio","aria-checked":K[n]===e,"aria-disabled":z[n][e].isDisabled,tabIndex:K[n]===e?0:-1,"data-sku-group":n,"data-sku-index":e},t.rgb&&r.createElement("i",{className:"".concat(x,"__color-dot"),style:{backgroundColor:"".concat(t.rgb)},"aria-hidden":"true"}),r.createElement("span",null,t.name)))})))}):r.createElement(r.Fragment,null))}var k=r.forwardRef(function(t,n){var e,a;return r.createElement(N,(e=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.forEach(function(n){_(t,n,e[n])})}return t}({},t),a=a={forwardedRef:n},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):(function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e.push.apply(e,r)}return e})(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}),e))})},15292:function(t,n,e){e.d(n,{O:()=>r});function r(t){return!t||t.isNotForSale||t.isOutOfStock||!t.isSale}}}]);