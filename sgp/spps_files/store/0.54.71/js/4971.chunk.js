"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["4971"],{81797:function(t,n,r){r.d(n,{$:()=>S});var e=r(67294),a=r(94184),o=r(78868),i=r(55709),u=r(41931),c=r(43825),l=r(13251),f=r(30776),s=r(20833),m=r(30130),p=r(582),b=r(66008),d=r(55412),v=r(15292),y=r(99506);function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}function g(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r,e,a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o=[],i=!0,u=!1;try{for(a=a.call(t);!(i=(r=a.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(t){u=!0,e=t}finally{try{i||null==a.return||a.return()}finally{if(u)throw e}}return o}}(t,n)||N(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||N(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,n){if(t){if("string"==typeof t)return _(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,n)}}function h(t){var n,r=t.skuMap,o=t.skuList,u=t.skuData,c=t.portalClassName,l=t.titleClassName,f=t.extendClassName,s=t.baseClassName,m=(0,d.m)(function(t,n){return n.pipe((0,i.U)(function(t){var n=j(t,3),r=n[0],e=n[1],a=n[2];return!!r.length&&!!e.length&&!!a.length}))},!1,[o,r,u]),p=j((0,e.useState)([{list:[,,,].fill(1)},{list:[,,].fill(1)}]),1)[0];return m?e.createElement(E,t):e.createElement("section",{className:a((g(n={},"".concat(c),!!c),g(n,"".concat(s," ").concat(s,"--loading"),!!s),g(n,"".concat(f," ").concat(f,"--loading"),!!f),n))},p.map(function(t,n){var r,o;return e.createElement(e.Fragment,{key:n},e.createElement("h3",{className:a((g(r={},"".concat(s,"__title ").concat(s,"__title--loading"),!!s),g(r,"".concat(f,"__title ").concat(f,"__title--loading"),!!f),g(r,"".concat(l," ").concat(l,"--loading"),!!l),r))},"\xa0"),e.createElement("ul",{className:a((g(o={},"".concat(s,"__list"),!!s),g(o,"".concat(f,"__list"),!!f),o))},t.list.map(function(t,n){var r,o;return e.createElement("li",{className:a((g(r={},"".concat(s,"__item"),!!s),g(r,"".concat(f,"__item"),!!f),r)),key:n},e.createElement("button",{className:a((g(o={},"".concat(s,"__button"),!!s),g(o,"".concat(f,"__button"),!!f),o))}))})))}))}function E(t){var n,r=t.skuMap,_=t.skuList,N=t.skuData,h=t.currentGoodsId,E=t.bigTapDisabledIds,S=t.setGoodsId,A=t.resetGoodsId,w=t.skuClickBury,k=t.portalClassName,D=t.titleClassName,I=t.extendClassName,C=t.baseClassName,U=t.forwardedRef,M=[C,I||""].filter(function(t){return!!t}),P=j((0,e.useState)(""),2),x=P[0],L=P[1],F=j((0,e.useState)(!1),2),B=F[0],G=F[1],R=j((0,e.useState)(Array(_.length).fill(-1)),2),T=R[0],$=R[1];function H(t,n,r){var e=Array.from(t);return e[n]=r,e}var K=(0,e.useMemo)(function(){return _.map(function(t){return t&&t.list?t.list.map(function(t){return t.name}):[]}).map(function(t){return t.map(function(t,n){return n})}).map(function(t){return t.map(function(t){return[t]})}).reduce(function(t,n){return t.reduce(function(t,r){return t.concat(n.map(function(t){return r.concat(t)}))},[])},[[]]).map(function(t){var n=r.filter(function(n){var r=j(n,2),e=r[0];return r[1],e===t.join(",")}).map(function(t){var n=j(t,2);return(n[0],n[1]).goodsId}).map(function(t){return Number(j(t,1)[0]||0)});return[t.join(","),n]})},[_,r]),V=(0,d.m)(function(t,n){return n.pipe((0,i.U)(function(t){var n=j(t,2),r=n[0],e=n[1];return r.map(function(t){var n=j(t,2);return[n[0],n[1].map(function(t){return Object.assign({},e.find(function(n){return n.itemId===t}))})]})}))},[],[K,N]),q=(0,e.useMemo)(function(){return _.map(function(t){return(null==t?void 0:t.list)||[]}).map(function(t,n){return t.map(function(t,r){return{className:M.map(function(t){return"".concat(t,"__button")}).join(" "),itemPosition:[n,r],isDisabled:!1,isVisible:!0}})})},[_]),z=(0,d.m)(function(t,n){return n.pipe((0,u.x)(function(t,n){var r=j(t,2),e=r[0],a=r[1],o=j(n,2),i=o[0],u=o[1];return e.join(",")===i.join(",")&&a===u}),(0,c.M)(t),(0,i.U)(function(t){var n=j(t,2),r=j(n[0],3),e=r[0],a=r[1],o=r[2],i=n[1];return e.map(function(t,n,r){return[[n,t],r,a,o,i[n]]})}),(0,l.b)(function(t){return o.of.apply(void 0,O(t)).pipe((0,i.U)(function(t,n){var r=j(t,5),e=j(r[0],2),a=(e[0],e[1],r[1]),o=r[2],i=r[3];return r[4].map(function(t,r){return[[n,r],a,o,i,t]})}),(0,l.b)(function(t){return o.of.apply(void 0,O(t)).pipe((0,i.U)(function(t){var n=j(t,5),r=j(n[0],2),e=r[0],a=r[1],o=n[1],i=n[2],u=n[3],c=n[4],l=M.map(function(t){return"".concat(t,"__button--active")}).join(" "),f=(M.map(function(t){return"".concat(t,"__button--hidden")}).join(" "),M.map(function(t){return"".concat(t,"__button--disabled")}).join(" ")),s=M.map(function(t){return"".concat(t,"__button--sold-out")}).join(" "),m=M.map(function(t){return"".concat(t,"__button--not-sku")}).join(" "),p=Array.from(o);p[e]=a;var b=i.filter(function(t){var n=j(t,2),r=n[0];return n[1],r===p.join(",")}).map(function(t){var n=j(t,2);return n[0],n[1]}),d=0===i.filter(function(t){var n=j(t,2),r=n[0];return n[1],r.split(",").map(function(t){return Number(t)})[e]===a}).flatMap(function(t){var n=j(t,2);return n[0],n[1]}).length,y=new Set(c.className?c.className.split(" "):[]);o[e]===a?y.add(l):y.delete(l);var _=Object.assign({},c,{className:Array.from(y).join(" ")}),g=p.slice(0,e+1);if(i.map(function(t){var n=j(t,2),r=n[0],e=n[1];return[r.split(",").map(function(t){return Number(t)}),e]}).filter(function(t){var n=j(t,2),r=n[0];return n[1],g.map(function(t,n){return r[n]===t}).every(function(t){return!0===t})}).flatMap(function(t){var n=j(t,2);return n[0],n[1]}),!b.length)return[_];if(d)return y.add(f),[_=Object.assign({},_,{className:Array.from(y).join(" "),isDisabled:!0})];y.delete(f),_=Object.assign({},_,{className:Array.from(y).join(" "),isDisabled:!1});var O=j(b,1)[0];return O.every(function(t){return!t})?(y.add(m),_=Object.assign({},_,{className:Array.from(y).join(" ")})):(y.delete(m),O.every(function(t){return u.includes(t.itemId)||(0,v.O)(t)})?y.add(s):y.delete(s),_=Object.assign({},_,{className:Array.from(y).join(" "),isDisabled:!1})),[_]}),(0,f.c)())}),(0,i.U)(function(t){return[t]}),(0,f.c)())}))},q,[T,V,E||[]]),J=j((0,y.$)(function(t,n,r){return t.pipe((0,u.x)(function(t,n){var r=j(t,2),e=(r[0],r[1]),a=j(n,2),o=(a[0],a[1]);return e.join(",")===o.join(",")}),(0,s.b)(function(t){var n=j(t,2),r=n[0];n[1],r&&(G(!0),w&&"function"==typeof w&&w(r))}),(0,i.U)(function(t){var n=j(t,2);return n[0],n[1]}),(0,m.a)(r),(0,c.M)(n),(0,s.b)(function(t){var n=j(t,2),r=j(n[0],2),e=j(r[0],4),a=e[0],o=e[1];return(e[2],e[3],r[1],j(n[1],1))[0],$(function(t){return H(t,a,o)})}),(0,i.U)(function(t){var n=j(t,2),r=j(n[0],2),e=j(r[0],4),a=e[0],o=e[1],i=e[2],u=e[3],c=j(r[1],1)[0],l=H(j(n[1],1)[0],a,o),f=c.filter(function(t){var n=j(t,2),r=n[0];return n[1],r===l.join(",")}).map(function(t){var n=j(t,2);return(n[0],j(n[1],1))[0]}).find(function(t){return!!t})||0;return f?S(f,u):i?A():L([+u,a,o,Date.now()].join(",")),[l]}))},[T],[K]),1)[0];return(0,d.m)(function(t,n){return n.pipe((0,p.n)(function(t){var n=j(t,3),r=n[0];return n[1],n[2],!r.length}),(0,c.M)(t),(0,u.x)(),(0,b.h)(function(t){var n=j(t,2),r=j(n[0],3),e=(r[0],r[1],r[2]);return n[1],!e}),(0,i.U)(function(t){var n=j(t,2),r=j(n[0],3),e=r[0],a=r[1],o=(r[2],n[1]);if(a){var i=j(e.filter(function(t){var n=j(t,2),r=(n[0],j(n[1],1)[0]);return r&&r.itemId===a}),1);return j(i[0],1)[0]}var u=j(e.filter(function(t){var n=j(t,2),r=(n[0],j(n[1],1))[0];return r&&!1===(0,v.O)(r)}),1)[0],c=j(e.filter(function(t){var n=j(t,2),r=(n[0],j(n[1],1))[0];return r&&!1!==(0,v.O)(r)&&!r.isNotForSale}),1)[0],l=j(e.filter(function(t){var n=j(t,2),r=(n[0],j(n[1],1))[0];return r&&!1!==(0,v.O)(r)&&!!r.isNotForSale}),1)[0];return j(u||c||l||[o.join(",")],1)[0]}),(0,u.x)(),(0,i.U)(function(t){return t.split(",").map(function(t){return Number(t)})}),(0,s.b)(function(t){return t.map(function(t,n){return J(["",[n,t,!0,!1]])})}))},T,[V,h||0,B]),(0,e.useEffect)(function(){if(""!==x){var t,n=j(x.split(",").map(function(t){return Number(t)}),3),r=n[0],e=n[1],a=n[2],o=V.filter(function(t){var n=j(t,2);return!!(n[0],n[1]).length}).map(function(t){var n=j(t,2),r=n[0],e=n[1];return[r.split(",").map(function(t){return Number(t)}),e]}),i=o.filter(function(t){var n=j(t,2),r=n[0];return n[1],r[e]===a}).map(function(t){var n=j(t,2),r=n[0],e=n[1];return{weight:r.map(function(t,n){return+(T[n]===t)}).reduce(function(t,n){return t+n},0),goods:e}}),u=(t=Math).max.apply(t,O(i.map(function(t){return t.weight}))),c=i.filter(function(t){return t.weight===u}).flatMap(function(t){return t.goods}),l=c.find(function(t){return t&&!1===(0,v.O)(t)}),f=c.find(function(t){return t&&!1!==(0,v.O)(t)}),s=l||f,m=s&&s.itemId||0;j(o.find(function(t){var n=j(t,2),r=(n[0],j(n[1],1))[0];return r&&r.itemId===m})||[[],[]],1)[0].forEach(function(t,n){return J(["",[n,t,!0,1===r]])})}},[x]),e.createElement("section",{className:a((g(n={},"".concat(k),!!k),g(n,"".concat(C),!!C),g(n,"".concat(I),!!I),n)),ref:U},N.length&&_.length?_.map(function(t,n){var r,o;return e.createElement(e.Fragment,{key:t.key},e.createElement("h4",{className:a((g(r={},"".concat(C,"__title"),!!C),g(r,"".concat(I,"__title"),!!I),g(r,"".concat(D),!!D),r))},t.title),e.createElement("ul",{className:a((g(o={},"".concat(C,"__list"),!!C),g(o,"".concat(I,"__list"),!!I),o))},t.list.map(function(t,r){var o;return z[n][r].isVisible,e.createElement("li",{key:"".concat(n,"-").concat(r,"-").concat(t.name),className:a((g(o={},"".concat(C,"__icon-item"),!!C&&t.rgb),g(o,"".concat(C,"__item"),!!C&&!t.rgb),g(o,"".concat(I,"__icon-item"),!!I&&t.rgb),g(o,"".concat(I,"__item"),!!I&&!t.rgb),o))},e.createElement("button",{disabled:z[n][r].isDisabled,className:z[n][r].className,onClick:function(){return J([t.name,[n,r,!1,!0]])},"aria-label":t.name},t.rgb&&e.createElement("i",{className:"".concat(C,"__color-dot"),style:{backgroundColor:"".concat(t.rgb)}}),e.createElement("span",null,t.name)))})))}):e.createElement(e.Fragment,null))}var S=e.forwardRef(function(t,n){var r,a;return e.createElement(h,(r=function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(n){g(t,n,r[n])})}return t}({},t),a=a={forwardedRef:n},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):(function(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r.push.apply(r,e)}return r})(Object(a)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))}),r))})},15292:function(t,n,r){r.d(n,{O:()=>e});function e(t){return!t||t.isNotForSale||t.isOutOfStock||!t.isSale}}}]);