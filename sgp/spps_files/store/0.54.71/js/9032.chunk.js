"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["9032"],{43503:function(e,t,r){r.d(t,{b:()=>a});var n=r(67294);function a(){return n.createElement("svg",{width:"44px",height:"49px",viewBox:"0 0 44 49",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.createElement("defs",null,n.createElement("filter",{x:"-39.8%",y:"-36.1%",width:"179.5%",height:"172.1%",filterUnits:"objectBoundingBox",id:"filter-1"},n.createElement("feOffset",{dx:"0",dy:"3",in:"SourceAlpha",result:"shadowOffsetOuter1"}),n.createElement("feGaussianBlur",{stdDeviation:"3",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.0980392157   0 0 0 0 0.0980392157   0 0 0 0 0.0980392157  0 0 0 0.24 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}),n.createElement("feMerge",null,n.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),n.createElement("feMergeNode",{in:"SourceGraphic"})))),n.createElement("g",{id:"页面-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",{id:"线下店-首页",transform:"translate(-1752.000000, -1151.000000)"},n.createElement("g",{id:"编组-9",transform:"translate(1752.000674, 1151.000000)"},n.createElement("path",{d:"M22.4587582,0.000773661833 C22.7850958,0.0019069457 23.1057042,0.00465611588 23.4207677,0.0091371713 L23.4207677,0.0091371713 L24.3495077,0.0278919922 L25.2460836,0.0577341181 L26.1116011,0.0993595426 C32.0640978,0.433603044 35.8150478,1.68507452 39.0708007,4.92804004 C41.8336873,7.68164205 43.1409349,10.72156 43.6784191,15.236563 L43.6784191,15.236563 L43.7589397,15.9818433 C43.7959346,16.3611362 43.8281127,16.7505489 43.8558396,17.1507151 L43.8558396,17.1507151 L43.9054668,17.9655733 L43.943874,18.8102341 L43.9717113,19.6858239 L43.9896286,20.5934694 C43.9918242,20.7474775 43.9936336,20.9028682 43.9950703,21.0596649 L43.9950703,21.0596649 L43.9993262,22.0175059 L43.9896785,23.4407601 L43.9718501,24.3478291 C43.9680737,24.4963013 43.9638859,24.6434364 43.9592731,24.7892578 L43.9592731,24.7892578 L43.9263875,25.6486115 L43.8826514,26.4775698 C43.8661921,26.7489491 43.847816,27.0154512 43.8274149,27.2772647 L43.8274149,27.2772647 L43.7600281,28.048828 C43.2811165,32.9750144 41.9909863,36.1900981 39.0864415,39.0928917 C36.3312922,41.8462652 33.2964806,43.1468443 28.7823645,43.6811691 L28.7823645,43.6811691 L28.0371894,43.7612082 C27.5315087,43.8102344 27.007781,43.8507388 26.4644906,43.883589 L26.703,43.867 L22.7364804,48.1958318 C22.363288,48.6029508 21.7307206,48.6304538 21.3236016,48.2572614 C21.3022449,48.2376844 21.2817491,48.2171885 21.2621721,48.1958318 L17.2935985,43.8684659 C16.8358205,43.8385405 16.3920694,43.8029707 15.961409,43.7612207 L15.961409,43.7612207 L15.2162352,43.6811875 C10.7021355,43.1469036 7.66749459,41.8464567 4.91282902,39.0935092 C2.00755869,36.1913793 0.717436023,32.9768965 0.238580919,28.0476639 L0.238580919,28.0476639 L0.171203022,27.2756027 C0.150804957,27.0136134 0.132431989,26.7469253 0.115975703,26.4753495 L0.115975703,26.4753495 L0.0722484766,25.6457695 C0.0658828083,25.5049993 0.0599692069,25.3629598 0.0544941206,25.2196274 L0.0544941206,25.2196274 L0.0267973686,24.3439295 L0.00897449081,23.4360678 L0,22.4949075 L0,21.5702513 L0.00792999927,20.5999183 L0.026046721,19.6640349 C0.205831707,12.6179833 1.34726114,8.50565856 4.91118196,4.94470236 C7.72186563,2.13658996 10.8609238,0.821199076 15.5142441,0.295982921 L15.5142441,0.295982921 L16.2822972,0.217628069 C16.9337147,0.157919341 17.6139554,0.111946902 18.325946,0.0779770287 L18.325946,0.0779770287 L19.1957619,0.0428634533 L20.0971814,0.0186065902 L21.0313282,0.00454068918 C21.3482899,0.00147657694 21.6708935,0 21.9993262,0 L21.9993262,0 Z",id:"路径-3",fill:"#FFFFFF",fillRule:"nonzero"}),n.createElement("path",{d:"M22.4448673,4.00074954 C28.2103065,4.02077138 32.9353497,4.46244294 36.247138,7.76122353 C39.6500556,11.1527059 39.9993262,16.0410824 39.9993262,22.0175059 C39.9993262,27.9862353 39.6540086,32.8705176 36.2589262,36.2635529 C32.8636321,39.6566588 27.9741262,40 21.9993262,40 C16.024385,40 11.1349497,39.6566588 7.73972622,36.2635529 C4.34400857,32.8715059 3.99932622,27.9862353 3.99932622,22.0175059 L3.9999806,21.5827084 C4.01795416,15.8114077 4.42679652,11.0831868 7.73831445,7.77442353 C11.1333968,4.38244706 16.0238909,4 21.9993262,4 Z M20.5098881,20.3795812 L17.3994408,20.3795812 C17.2719248,20.3795812 17.1684387,20.481851 17.1684387,20.606936 L17.1684387,20.606936 L17.1684387,28.8447257 C17.1684387,28.9687242 17.2719248,29.0714286 17.3994408,29.0714286 L17.3994408,29.0714286 L20.5098881,29.0714286 C20.6354732,29.0714286 20.7384586,28.9687242 20.7384586,28.8447257 L20.7384586,28.8447257 L20.7384586,20.606936 C20.7384586,20.481851 20.6354732,20.3795812 20.5098881,20.3795812 L20.5098881,20.3795812 Z M19.8470479,14.9285714 L11.2991823,14.9285714 C11.172596,14.9285714 11.0707548,15.0306964 11.0707548,15.1563608 L11.0707548,15.1563608 L11.0707548,28.8447257 C11.0707548,28.9687242 11.172596,29.0714286 11.2991823,29.0714286 L11.2991823,29.0714286 L14.261874,29.0714286 C14.3885319,29.0714286 14.4930192,28.9687242 14.4930192,28.8447257 L14.4930192,28.8447257 L14.4930192,18.101543 C14.4930192,17.9775444 14.5952895,17.874333 14.7219473,17.874333 L14.7219473,17.874333 L20.0889922,17.874333 C21.1440212,17.9008421 22.1582135,18.0275205 22.702177,18.5800092 C23.3346795,19.2210063 23.4046953,20.4963368 23.4078421,21.7373361 L23.4078421,21.7373361 L23.4078421,28.8447257 C23.4078421,28.9687242 23.5113281,29.0714286 23.6383436,29.0714286 L23.6383436,29.0714286 L26.5991043,29.0714286 C26.725047,29.0714286 26.8285331,28.9687242 26.8285331,28.8447257 L26.8285331,28.8447257 L26.8279254,21.7153452 C26.8180806,19.5391909 26.676847,17.3240232 25.5682484,16.1997011 C24.416456,15.0317104 22.0810459,14.9285714 19.8470479,14.9285714 L19.8470479,14.9285714 Z M32.6978252,14.9285714 L29.7355626,14.9285714 C29.6089763,14.9285714 29.5061339,15.0306964 29.5061339,15.1563608 L29.5061339,15.1563608 L29.5061339,28.8447257 C29.5061339,28.9687242 29.6089763,29.0714286 29.7355626,29.0714286 L29.7355626,29.0714286 L32.6978252,29.0714286 C32.8233388,29.0714286 32.9278976,28.9687242 32.9278976,28.8447257 L32.9278976,28.8447257 L32.9278976,15.1563608 C32.9278976,15.0306964 32.8233388,14.9285714 32.6978252,14.9285714 L32.6978252,14.9285714 Z",id:"logo",fill:"#FF6900"})))))}},17093:function(e,t,r){r.d(t,{A:()=>ep});var n,a=r(67294),o=r(94184),i=r(96494);function l(e){var t=e.serviceInfoList;return a.createElement("ul",{className:"service-list"},(void 0===t?[]:t).map(function(e,t){return a.createElement("li",{className:"service-list__item",key:t},a.createElement("img",{className:"service-list__icon",src:e.icon,alt:e.info}),a.createElement("span",{className:"service-list__desc"},e.info))}))}var c=r(30187);function u(){var e=(0,a.useContext)(c.j),t=e.data,r=t.title,n=t.serviceInfoList;return(0,a.useEffect)(function(){return e.getService(),function(){e.resetService()}},[]),a.createElement("section",{className:"head-content"},"success"===e.ajaxStatus?a.createElement(a.Fragment,null,a.createElement("h1",{className:"head-content__title"},r),a.createElement(l,{serviceInfoList:n})):a.createElement(i.a,{extClassNames:"head-content__loader"}))}var s=r(25228),m=r(73444),f=r(79894);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var E=((n=E||{}).UPDATE_SEARCH_WORD="UPDATE_SEARCH_WORD",n.UPDATE_FILTER_DATA="UPDATE_FILTER_DATA",n.UPDATE_POSITION="UPDATE_POSITION",n.UPDATE_ACTIVE_ITEM="UPDATE_ACTIVE_ITEM",n.UPDATE_MAP_CENTER="UPDATE_MAP_CENTER",n.UPDATE_APP_CENTER="UPDATE_APP_CENTER",n.UPDATE_ACTIVE_TAB="UPDATE_ACTIVE_TAB",n.UPDATE_IS_HAS_ACTIVE="UPDATE_IS_HAS_ACTIVE",n),v={word:"",filterType:[],position:{lat:1e3,lng:1e3},activeItem:"",mapCenter:{lat:1e3,lng:1e3},wordChangeCount:0,isMarkerHasActive:!1,appCenter:{lat:1e3,lng:1e3},activeTab:"list"};function b(e,t){switch(t.type){case"UPDATE_POSITION":return y(p({},e),{position:t.payload});case"UPDATE_FILTER_DATA":return y(p({},e),{filterType:t.payload});case"UPDATE_SEARCH_WORD":return y(p({},e),{word:t.payload,wordChangeCount:e.wordChangeCount+1});case"UPDATE_ACTIVE_ITEM":if(t.payload)return y(p({},e),{activeItem:t.payload,isMarkerHasActive:!0});return y(p({},e),{activeItem:t.payload});case"UPDATE_MAP_CENTER":return y(p({},e),{mapCenter:t.payload});case"UPDATE_APP_CENTER":return y(p({},e),{appCenter:t.payload});case"UPDATE_ACTIVE_TAB":return y(p({},e),{activeTab:t.payload});case"UPDATE_IS_HAS_ACTIVE":return y(p({},e),{isMarkerHasActive:t.payload});default:return e}}var g=(0,a.createContext)({state:v,dispatch:function(e){}});function h(e){var t,r=function(e){if(Array.isArray(e))return e}(t=(0,a.useReducer)(b,v))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],o=r[1];return a.createElement(g.Provider,{value:{state:n,dispatch:o}},e.children)}var _=r(48597),A=r(86690);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||S(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}}function I(e){var t=T((0,a.useState)([]),2),r=t[0],n=t[1],o=e.isFilterActive,i=e.setIsFilterActive,l=e.storeFilterData,c=(0,a.useContext)(g),u=c.state.filterType,s=c.dispatch,d=(0,_.YB)(),p=Object.entries(l||{}),y=function(e){var t=e.target.value;r.includes(t)?n(r.filter(function(e){return e!==t})):n(((function(e){if(Array.isArray(e))return C(e)})(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||S(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([t]))};return((0,a.useEffect)(function(){s({type:E.UPDATE_FILTER_DATA,payload:Object.keys(l)}),n(Object.keys(l))},[l]),void 0!==o&&o)?a.createElement("div",{className:"store-filter store-filter-m"},a.createElement("div",{className:"store-filter__main"},a.createElement("div",{className:"store-filter__checkbox"},p.map(function(e){var t=T(e,2),n=t[0],o=t[1];return a.createElement(m.Z,{value:n,key:n,checked:r.includes(n),className:"store-filter__radio-item",cbType:"default",onChange:y},o)})),a.createElement(f.z,{btnType:"primary",className:"store-filter__confirm",onClick:function(){s({type:E.UPDATE_FILTER_DATA,payload:r}),i&&i(!1),(0,A.otClick)({tip:{a:16,b:107,c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementTitle:"confirm",elementName:r.map(function(e){return l[e]}).join("+")})}},d.get("70d9be9b139893aa6c69b5e77e614311"))),a.createElement("div",{className:"store-filter__mask",onClick:function(){n(u),i&&i(!1)},role:"button",tabIndex:0})):a.createElement(a.Fragment,null)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}function O(e){var t=e.storeFilterData,r=(0,a.useContext)(g),n=r.state.filterType,o=r.dispatch,i=Object.entries(t||{}),l=function(e,r){var a=e.target.value,i=n.includes(e.target.value)?n.filter(function(e){return e!==a}):((function(e){if(Array.isArray(e))return w(e)})(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||N(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([a]);(0,A.otClick)({tip:{c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementTitle:r,elementName:i.map(function(e){return t[e]}).join("+")}),o({type:E.UPDATE_FILTER_DATA,payload:i})};return(0,a.useEffect)(function(){o({type:E.UPDATE_FILTER_DATA,payload:Object.keys(t)})},[t]),a.createElement("div",{className:"store-filter store-filter-pc"},i.map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||N(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],o=t[1];return a.createElement(m.Z,{value:r,key:r,checked:n.includes(r),className:"store-filter__radio-item",cbType:"card",onChange:function(e){return l(e,o)}},o)}))}function L(e){return"mobile"!==(0,s.ag)()?a.createElement(O,e):a.createElement(I,e)}function x(e){var t=(0,_.YB)(),r=e.updateTab,n=(0,a.useContext)(g).state.activeTab,i=function(e){r(e),(0,A.otClick)({tip:{c:"map_listing",d:0,e:17769},isOpenGA:!0,elementTitle:"list"===e?t.get("56ee3495a32081ccb6d2376eab391bfa"):t.get("46f3ea056caa3126b91f3f70beea068c"),elementName:"list"===e?t.get("56ee3495a32081ccb6d2376eab391bfa"):t.get("46f3ea056caa3126b91f3f70beea068c")})};return a.createElement("div",{className:"toggle-tab"},a.createElement("div",{className:"toggle-tab__container"},a.createElement("span",{className:o("toggle-tab__item",{active:"list"===n}),onClick:function(){return i("list")},role:"button",tabIndex:0},t.get("56ee3495a32081ccb6d2376eab391bfa")),a.createElement("i",{className:"line"}),a.createElement("span",{className:o("toggle-tab__item",{active:"map"===n}),onClick:function(){return i("map")},role:"button",tabIndex:0},t.get("46f3ea056caa3126b91f3f70beea068c"))))}var k=r(45501),P=r(49153),D=r(82990);function j(){var e=(0,a.useContext)(D.N),t=(0,a.useContext)(P.n),r=(0,a.useContext)(g).state.word,n=e.data.storeList,o=t.data,i=o.searchResult.storeList,l=o.recommendData.storeRecommend;return{resultData:(0,a.useMemo)(function(){return r?i.length?i:l||[]:n},[r,n,i,l]),resultType:i.length?1:2}}function U(e){var t=e.storeTypeInfo,r=(0,s.ag)(),n=(0,_.YB)(),l=j(),c=l.resultData,u=void 0===c?[]:c,m=l.resultType,d=(0,a.useContext)(g),p=d.state,y=p.filterType,v=p.activeItem,b=p.word,h=p.wordChangeCount,C=d.dispatch,T=(0,a.useContext)(P.n),S=(0,a.useContext)(D.N),I=(0,a.useCallback)(function(e){"mobile"!==r&&C({type:E.UPDATE_ACTIVE_ITEM,payload:e})},[v]),w=(0,a.useMemo)(function(){return u.filter(function(e){return y.includes(e.storeType)})},[u,y]);return a.createElement("div",{className:"mi-store-list"},"success"===T.ajaxStatus||0===h&&S.getServiceSuccess?a.createElement(a.Fragment,null,2===m&&""!==b&&a.createElement(a.Fragment,null,a.createElement("div",{className:"mi-store-list-empty"},a.createElement("i",{className:"micon micon-warning"}),a.createElement("p",{className:"mi-store-list-empty__content"},n.get("acea81a316556b9fd4ad5e0dc3cc9b55"))),a.createElement("p",{className:"mi-store-list-empty__tip"},n.get("da7ca443be6d85cb6940cb047c11e966"))),a.createElement("ul",{className:"mi-store-list__container",role:"menu",tabIndex:0},w.map(function(e,i){var l=e.id,c=e.name,u=e.link,s=e.address,m=e.weekend,d=e.storeType,p=e.mobileArr,y=t[d]||"";return a.createElement("li",{className:o("mi-store-list__item",{active:l===v&&"mobile"!==r}),key:"".concat(i,"-").concat(l),role:"menuitem",tabIndex:0,onClick:function(){return I(l)}},a.createElement("h3",{className:"mi-store-list__item-title"},c),s&&a.createElement("p",{className:"mi-store-list__item-location"},a.createElement("i",{className:"micon micon-location"}),a.createElement("span",null,s)),m&&a.createElement("p",{className:"mi-store-list__item-time"},a.createElement("i",{className:"micon micon-time"}),a.createElement("span",null,m)),!!p.length&&a.createElement("p",{className:"mi-store-list__item-phone"},a.createElement("i",{className:"micon micon-phone"}),a.createElement("span",null,p.join(", "))),y&&a.createElement(k.V,{className:"mi-store-list__item-tag",color:"orange"},y),a.createElement(f.z,{className:"mi-store-list__item-link",onClick:function(e){return e.stopPropagation(),(0,A.otClick)({tip:{c:"xiaomistore_storelist",d:0,e:17769},isOpenGA:!0,elementTitle:n.get("d3da97e2d9aee5c8fbe03156ad051c99"),elementName:"more",linkUrl:u}),u&&window.location.assign(u)},href:u,btnType:"link",withArrow:"enable"},n.get("d3da97e2d9aee5c8fbe03156ad051c99")))}))):a.createElement(i.a,{extClassNames:"mi-store-list__loader"}))}var M=r(49826),R=function(e){var t=e||{lat:1e3,lng:1e3},r=t.lat,n=t.lng;return 1e3!==r&&1e3!==n};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var V=r(25185),W=r(43503);function H(e){var t=e.storeData,r=t.id,n=t.name,i=t.image,l=t.address,u=t.weekend,m=t.link,d=t.storeType,p=e.activeItem,y=e.setActiveItem,v=e.handleMakerClick,b=(0,a.useContext)(g).dispatch,h=(0,a.useContext)(c.j).data.storeTypeInfo,C=(0,s.ag)(),T=(0,_.YB)(),S=(0,a.useMemo)(function(){return"mobile"===C},[C]),I=(0,a.useMemo)(function(){return r===p},[p,r]),w=(0,a.useMemo)(function(){return h[d]||""},[h,d]),N=function(e){return(0,A.otClick)({tip:{c:"xiaomistore_card",d:0,e:17769},isOpenGA:!0,elementTitle:T.get("d3da97e2d9aee5c8fbe03156ad051c99"),elementName:"more",linkUrl:e}),e&&window.location.assign(e)};return a.createElement("div",{className:o("store-marker",{active:I})},a.createElement("div",{className:"store-marker__sign",onClick:function(e){I||(y(r),!S&&v&&v(e,r))},role:"button",tabIndex:0},a.createElement(W.b,null)),p===r&&a.createElement("div",{className:"store-marker__card"},"mobile"!==C&&"tablet"!==C?a.createElement(a.Fragment,null,a.createElement("img",{src:i,alt:n}),w&&a.createElement(k.V,{className:"store-marker__card--tag",color:"orange"},w),n&&a.createElement("h3",{className:"store-marker__card--title"},n),l&&a.createElement("p",{className:"store-marker__card--location"},a.createElement("i",{className:"micon micon-location"}),a.createElement("span",null,l)),u&&a.createElement("p",{className:"store-marker__card--time"},a.createElement("i",{className:"micon micon-time"}),a.createElement("span",null,u)),a.createElement(f.z,{className:"store-marker__card--btn",btnType:"primary",onClick:function(){return N(m)}},T.get("d3da97e2d9aee5c8fbe03156ad051c99")),a.createElement(V.q,{symbol:"dialog-close",className:"store-marker__clear",onClick:function(){b({type:E.UPDATE_ACTIVE_ITEM,payload:""})}})):a.createElement(a.Fragment,null,n&&a.createElement("h3",{className:"store-marker__card--title"},n),w&&a.createElement(k.V,{className:"store-marker__card--tag",color:"orange"},w),a.createElement(f.z,{className:"store-marker__card--btn",btnType:"link",onClick:function(){return N(m)}},T.get("d3da97e2d9aee5c8fbe03156ad051c99")," ",a.createElement(V.q,{symbol:"link-arrow"})),a.createElement("span",{className:"store-marker__tip"}))))}function B(e){return R({lat:e.lat,lng:e.lng})?a.createElement("div",{className:"center-maker"},a.createElement("div",{className:"center-maker__outer"},a.createElement("div",{className:"center-maker__inner"}))):a.createElement(a.Fragment,null)}var z=r(76319),q=r(54074),G=r(79080);function $(e,t){var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(r)for(;e;){if(r.call(e,t))return e;e=e.parentElement}return null}function Z(e){var t=e.word,r=e.updateSearchWord,n=e.setSuggestShow,o=e.userInput,i=e.setUserInput,l=e.userRealInput,c=(0,a.useContext)(q.QF),u=(0,s.ag)(),m=(0,_.YB)(),f=(0,a.useRef)(null),d=(0,G.m)(function(e){return c.getObservable({params:{word:e,from:"mobile"===u?"mobile":"pc",type:2}})},200),p=function(e){e.target&&($(e.target,".store-search")||n(!1))};return(0,a.useEffect)(function(){return i(t)},[t]),(0,a.useEffect)(function(){return window.addEventListener("click",p,!1),function(){window.removeEventListener("click",p,!1)}},[]),a.createElement(z.I,{ref:f,fullwidth:!0,placeholder:m.get("d90ec336fd06c0eca448acaa1970e3d2"),value:o,onChange:function(e){var t=e.target.value;l.current=t,i(t),n(!!t),""!==t&&d(t)},onKeyPress:function(e){if("Enter"===e.key){var t;r(o),null===(t=f.current)||void 0===t||t.blur()}},onFocus:function(){d(o),n(!0)},prefix:a.createElement("i",{className:"micon micon-search-glass"}),suffix:o.length?a.createElement("i",{className:"micon micon-clear",onClick:function(){var e;i(""),null===(e=f.current)||void 0===e||e.focus()},role:"button",tabIndex:0}):null,className:"store-search-input"})}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function Q(){var e,t,r,n,i,l,c,u,m,f,d,p,y,v,b,h,A,C,T=(r=(t=function(e){if(Array.isArray(e))return e}(e=(0,a.useState)({lat:1e3,lng:1e3}))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],n=t[1],i=(0,_.oW)(),l=j().resultData,u=(c=(0,a.useContext)(g).state).position,m=c.activeItem,f=c.isMarkerHasActive,d=c.appCenter,p=c.filterType,y=c.activeTab,v=l.filter(function(e){return p.includes(e.storeType)}),b=(0,a.useRef)(),(0,a.useEffect)(function(){var e={lat:1e3,lng:1e3};if(m||!f){if(m){var t=null==l?void 0:l.find(function(e){return e.id===m});e={lat:(null==t?void 0:t.latitude)||1e3,lng:(null==t?void 0:t.longitude)||1e3}}else e=R(d)?d:R(u)?u:v.length?{lat:v[0].latitude||1e3,lng:v[0].longitude||1e3}:{lat:i.capitalLatitude,lng:i.capitalLongitude};R(e)?n(e):n({lat:i.capitalLatitude,lng:i.capitalLongitude})}},[m,u,l,d,p,f,y]),(0,a.useEffect)(function(){return function(){b.current=y}},[y]),function(e){if(Array.isArray(e))return e}(h=[r])||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(h,1)||function(e,t){if(e){if("string"==typeof e)return Y(e,1);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}}(h,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],S=j().resultData,I=void 0===S?[]:S,w=(0,a.useContext)(g),N=w.state,O=N.filterType,L=N.activeItem,x=N.position,k=N.appCenter,P=N.isMarkerHasActive,D=w.dispatch,U=(0,_.Sz)(),V=(0,_.oW)(),W=(0,_.aU)(),z=(0,a.useRef)(null),q=(0,s.ag)(),G=(0,a.useMemo)(function(){return R(k)?k:x},[x,k]),Z=(0,a.useMemo)(function(){return I.filter(function(e){return O.includes(e.storeType)})},[I,O]),Q=(0,a.useCallback)(function(e){D({type:E.UPDATE_ACTIVE_ITEM,payload:e})},[L]),J=(0,a.useMemo)(function(){return{bootstrapURLKeys:{key:"AIzaSyAbE7zeAOcous84QCZUyC9h6uIuLwYi9LU",language:V.lang,libraries:["places","geometry","drawing","visualization"]},center:T,zoom:L||P?14:"hk"===W?12:7,yesIWantToUseGoogleMapApiInternals:!0,options:function(){return{draggable:!0,gestureHandling:"tablet"===q?"greedy":""}}}},[T,L,q]),X=function(e,t){var r=document.querySelector(".store-map-index__pc .mi-store-list"),n=document.querySelector(".store-map-index__pc .mi-store-list__container"),a=Array.from(Z).findIndex(function(e){return e.id===t});if(r&&t){var o=n.firstElementChild.offsetTop,i=n.querySelector("li:nth-child(".concat(a+1,")")).offsetTop;r.scrollTo(0,i-o)}},ee=function(e){e.target&&["mobile","tablet"].includes(q)&&($(e.target,".store-marker")||D({type:E.UPDATE_ACTIVE_ITEM,payload:""}))};return(0,a.useEffect)(function(){var e=setTimeout(function(){if(L){(Array.from(document.querySelectorAll(".store-marker"))||[]).forEach(function(e){var t=e.parentElement;t&&(t.style.zIndex="0")});var e=document.querySelector(".store-marker.active"),t=e&&e.parentElement;t&&(t.style.zIndex="10000")}},0);return function(){clearTimeout(e)}},[L,q,Z]),(0,a.useEffect)(function(){var e=document.querySelector(".mi-store-map");return e.addEventListener("click",ee,!1),function(){e.removeEventListener("click",ee,!1)}},[q]),(0,a.useEffect)(function(){return function(){D({type:E.UPDATE_IS_HAS_ACTIVE,payload:!1})}},[]),a.createElement("div",{className:o("mi-store-map",{"with-center":R(G)})},!U&&a.createElement(M.ZP,(A=K({},J),C=C={onGoogleApiLoaded:function(e){var t=e.map;z.current=t,t.panTo(K({},T))}},Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(C)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(C)).forEach(function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(C,e))}),A),Z.map(function(e,t){var r=e.latitude,n=e.longitude,o=e.id;return!!Number(r)&&!!Number(n)&&a.createElement(H,{key:"".concat(t,"-").concat(o),lat:Number(r),lng:Number(n),activeItem:L,setActiveItem:Q,storeData:e,handleMakerClick:X})}),a.createElement(B,G)),R(G)&&a.createElement("div",{className:"center-control",onClick:function(){z.current&&z.current.panTo(K({},G)),D({type:E.UPDATE_ACTIVE_ITEM,payload:""})},role:"button",tabIndex:0},a.createElement("img",{className:"center-control__icon",src:"//i01.appmifile.com/webfile/globalimg/wheretobuy/location.png",alt:"go center"})))}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ee=function(e,t,r,n){var a="",o=t.replace(/[()[\]*+^${}|?]/gi,function(e){return"\\".concat(e)});try{a=e.replace(RegExp(o,"gi"),function(e){return"<span style='color: ".concat(r,"; font-weight: ").concat(n,";'>").concat(e,"</span>")})}catch(t){a=e}return a};function et(e){var t=e.suggestShow,r=e.updateSearchWord,n=e.userInput,i=e.hideSuggest,l=e.userRealInput,c=e.setUserInput,u=X((0,a.useState)(-1),2),m=u[0],f=u[1],d=X((0,a.useState)(!1),2),p=d[0],y=d[1],E=(0,s.ag)(),v=(0,a.useMemo)(function(){return"mobile"===E},[E]),b=(0,a.useContext)(q.QF).data,g=b.suggestList,h=void 0===g?[]:g,_=b.keyword,C=(0,a.useMemo)(function(){return!!h.length&&t},[h,t]),T=function(e){!v&&("ArrowDown"===e.key&&m<h.length-1&&(y(!1),f(m+1)),"ArrowUp"===e.key&&m>=0&&(y(!1),f(m-1)),"Escape"===e.key&&i&&i())},S=function(e){y(!0),c&&c((null==l?void 0:l.current)||""),f(e)};return(0,a.useEffect)(function(){m>=0&&h.length&&!p?c&&c(h[m].name):c&&c((null==l?void 0:l.current)||"")},[m]),(0,a.useEffect)(function(){return window.addEventListener("keydown",T,!1),function(){window.removeEventListener("keydown",T,!1)}},[h,m]),(0,a.useEffect)(function(){return function(){f(-1)}},[C]),(0,a.useEffect)(function(){if(h.length){var e=(0,A.otExposeWith)({exposeThreshold:0,targetNodeSelector:".store-suggest__item[data-ot-expose]",isInfinite:!1},function(e){return Object.assign({},e,{isOpenGA:!0})});return function(){e&&e.disconnect()}}return function(){return null}},[h]),a.createElement(a.Fragment,null,C&&a.createElement("ul",{className:"store-suggest",onMouseLeave:function(){return f(-1)},role:"menu",tabIndex:0},h.map(function(e,t){var i=e.name;return a.createElement("li",{className:o("store-suggest__item",{active:m===t,"key-select":!p&&m===t}),onMouseEnter:function(){return S(t)},key:i,onClick:function(){return r(i)},"data-ot-expose":JSON.stringify({tip:{c:"xiaomistore_search",d:t+1,e:17770},elementName:"search",extra:{searchWord:_}}),role:"menuitem",tabIndex:0},a.createElement("span",{dangerouslySetInnerHTML:{__html:ee(i,v?n:(null==l?void 0:l.current)||"","#191919",500)}}),a.createElement("i",{className:"micon micon-forward"}))})))}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(){var e=en((0,a.useState)(""),2),t=e[0],r=e[1],n=en((0,a.useState)(!1),2),o=n[0],i=n[1],l=(0,s.ag)(),c=(0,a.useRef)(""),u=(0,a.useContext)(q.QF),m=(0,a.useContext)(g),f=m.state.word,d=m.dispatch,p=(0,a.useCallback)(function(){return i(!1)},[o]),y=(0,a.useCallback)(function(e){d({type:E.UPDATE_SEARCH_WORD,payload:e}),d({type:E.UPDATE_ACTIVE_ITEM,payload:""}),d({type:E.UPDATE_IS_HAS_ACTIVE,payload:!1}),c.current=e,i(!1),u.resetService(),(0,A.otClick)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",extra:{searchWord:e}}),(0,A.otCustom)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",event:"search",searchWord:e})},[f,o]);return a.createElement("div",{className:"store-search"},a.createElement("div",{className:"store-search-bar"},a.createElement(Z,{setSuggestShow:i,word:f,updateSearchWord:y,setUserInput:r,userInput:t,userRealInput:c})),"mobile"!==l&&a.createElement(et,{suggestShow:o,updateSearchWord:y,userInput:t,hideSuggest:p,userRealInput:c,setUserInput:r}))}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e){var t,r=e.isSearchActive,n=e.setIsSearchActive,o=(0,s.ag)(),i=(0,_.YB)(),l=(0,a.useContext)(q.QF),c=(0,a.useContext)(g),u=c.state.word,m=c.dispatch,f=function(e){if(Array.isArray(e))return e}(t=(0,a.useState)(""))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=f[0],p=f[1],y=(0,a.useRef)(null),v=(0,G.m)(function(e){return l.getObservable({params:{word:e,from:"mobile",type:2}})},200);function b(e){p(e),m({type:E.UPDATE_SEARCH_WORD,payload:e}),n(!1),l.resetService(),(0,A.otClick)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",extra:{searchWord:e}}),(0,A.otCustom)({tip:{c:"xiaomistore_search",d:0,e:17769},elementName:"search",event:"search",searchWord:e})}var h=function(){var e;p(""),m({type:E.UPDATE_SEARCH_WORD,payload:""}),l.resetService(),null===(e=y.current)||void 0===e||e.focus()},C=function(){return d.length?a.createElement("i",{className:"micon micon-clear",onClick:h,role:"button",tabIndex:0}):null};return(0,a.useEffect)(function(){var e;p(u),r&&(null===(e=y.current)||void 0===e||e.focus())},[r]),a.createElement(a.Fragment,null,a.createElement(z.I,{onFocus:function(){n(!0),v(d)},fullwidth:!0,placeholder:i.get("d90ec336fd06c0eca448acaa1970e3d2"),prefix:a.createElement("i",{className:"micon micon-search-glass"}),suffix:C(),className:"store-search-input-m",value:u,onChange:function(){return null}}),r&&a.createElement("div",{className:"store-control-m"},a.createElement("div",{className:"store-control-m__bar"},a.createElement(V.q,{symbol:"back",onClick:function(){return n(!1)}}),a.createElement(z.I,{fullwidth:!0,placeholder:i.get("d90ec336fd06c0eca448acaa1970e3d2"),prefix:a.createElement("i",{className:"micon micon-search-glass"}),suffix:C(),className:"store-search-input-m active",onChange:function(e){p(e.target.value),v(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&b(d)},value:d,ref:y})),"mobile"===o&&a.createElement(et,{suggestShow:!0,updateSearchWord:b,userInput:d})))}var el=r(32195);function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ec(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ec(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e){var t=e.location,r=eu((0,a.useState)(!1),2),n=r[0],i=r[1],l=eu((0,a.useState)(!1),2),m=l[0],f=l[1],d=(0,s.ag)(),p=(0,_.Sz)(),y=(0,a.useContext)(c.j),v=(0,a.useContext)(P.n).data.point,b=(0,a.useContext)(g),h=b.dispatch,C=b.state.activeTab,T=y.data.storeTypeInfo,S=(0,a.useCallback)(function(e){e!==C&&h({type:E.UPDATE_ACTIVE_TAB,payload:e})},[C]);return(0,a.useEffect)(function(){t&&R(v)&&h({type:E.UPDATE_APP_CENTER,payload:v})},[t,v]),(0,a.useEffect)(function(){var e=document.querySelector(".store-map-index");return"mobile"===d&&document.body.classList.add("mistore"),"mobile"!==d||p||(0,el.Mu)()||!e||(e.style.height=window.innerHeight-48+"px"),function(){document.body.classList.remove("mistore"),e&&(e.style.height="")}},[d]),a.createElement("div",{className:o("store-map-index",{"store-map-index--app":(0,el.Mu)()})},a.createElement(u,null),a.createElement("div",{className:"store-map-index__mobile hide-pc"},a.createElement("div",{className:"store-data-control"},a.createElement("div",{className:"store-search-control"},a.createElement(ei,{isSearchActive:n,setIsSearchActive:i}),a.createElement(V.q,{symbol:"filter",onClick:function(){f(!0),(0,A.otClick)({tip:{c:"xiaomistore_type",d:0,e:17769},isOpenGA:!0,elementName:"filter"})}})),a.createElement(L,{isFilterActive:m,setIsFilterActive:f,storeFilterData:T}),a.createElement(x,{updateTab:S})),a.createElement("div",{className:"mi-store-m__main hide-pc"},"list"===C?a.createElement(U,{storeTypeInfo:T}):a.createElement(Q,null))),a.createElement("div",{className:"store-map-index__pc hide-m"},a.createElement("div",{className:"store-data-control__pc"},a.createElement(ea,null),a.createElement(L,{storeFilterData:T}),a.createElement(U,{storeTypeInfo:T})),a.createElement("div",{className:"store-main-content"},a.createElement(Q,null))))}var em=r(20651),ef=r(79292);function ed(){var e=(0,s.ag)(),t=(0,a.useContext)(g),r=t.state,n=r.word,o=r.position,i=r.wordChangeCount,l=t.dispatch,c=(0,a.useContext)(P.n),u=(0,a.useContext)(D.N),m=(0,em.W)("location"),f=(0,a.useRef)(),d=function(){var t=R(o)?o:{},r=m?{location:encodeURIComponent(m)}:{},a={};if(R(o)&&(a.lat=o.lat,a.lon=o.lng),n)c.getService({params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({search_from:"index",type:3,word:n,page_index:0,page_size:80},t,r)});else{if(0!==i)return;u.getService({params:Object.assign(a,{pageNum:1,pageSize:1e3,from:"mobile"===e?"mobile":"pc",storeType:"1,2,3"})})}};return(0,a.useEffect)(function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,r=t.latitude,n=t.longitude;l({type:E.UPDATE_POSITION,payload:{lng:n,lat:r}}),window.hasRequestPosition||(0,A.otClick)({tip:{c:"xiaomistore_allowlocation",d:0,e:17769},isOpenGA:!0,elementTitle:"",elementName:"allow"})})},[]),(0,a.useEffect)(function(){return d()},[n,o,i,m]),(0,a.useEffect)(function(){return("mobile"===e&&"tablet"===f.current||"tablet"===e&&"mobile"===f.current)&&(l({type:E.UPDATE_ACTIVE_ITEM,payload:""}),l({type:E.UPDATE_IS_HAS_ACTIVE,payload:!1})),function(){f.current=e}},[e]),a.createElement(a.Fragment,null,a.createElement(es,{location:m}))}function ep(){var e=(0,_.oW)();return(0,em.W)("location")||window.hasRequestPosition||(0,ef.rG)(),(0,a.useEffect)(function(){window.hasRequestPosition=!0},[]),a.createElement(q.Su,{siteConfig:e,isAutoFetch:!1},a.createElement(P.J,{siteConfig:e,isAutoFetch:!1},a.createElement(c.f,{siteConfig:e,isAutoFetch:!1},a.createElement(D.J,{siteConfig:e,isAutoFetch:!1},a.createElement(h,null,a.createElement(ed,null))))))}},30187:function(e,t,r){r.d(t,{f:()=>u,j:()=>c});var n=r(67294),a=r(48785),o=r(81845);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=(0,a.o)(s),c=(0,n.createContext)(l);function u(e){var t,r=e.siteConfig,a=e.isAutoFetch,u=e.children,m=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(l))||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=m[0],d=m[1];function p(e){var t=e.data,r=e.errmsg,n=e.errno;return{data:s(t||[]),errMsg:String(r),errNo:Number(n)}}var y={url:"".concat(r.goSite,"/v2/authorizedstore/getopxdata"),method:"GET"};return n.createElement(o.h,{context:c,setState:d,defaultValue:l,adapterError:function(e){return p(e)},adapter:p,value:f,siteConfig:r,isAutoFetch:!!a,ajaxConfig:y},u)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title||"",serviceInfoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.from(e||[]).map(function(e){return{info:e.info||"",icon:e.icon||""}})}(e.serviceInfoList||[]),storeTypeInfo:e.storeTypeInfo||{}}}}}]);